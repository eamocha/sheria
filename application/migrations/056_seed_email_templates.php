<?php
defined('BASEPATH') OR exit('No direct script access allowed');

class Migration_Seed_Email_Templates extends CI_Migration {

    private $table_name = 'email_templates';

    public function up()
    {
        $this->db->trans_start(); // Start a transaction for atomicity

        $sql = "
            SET IDENTITY_INSERT [dbo].[{$this->table_name}] ON;

            INSERT INTO [dbo].[{$this->table_name}] (
                [id],
                [template_key],
                [template_name],
                [subject],
                [body_content],
                [is_active],
                [variable_count]
            )
            VALUES
            -- System/Auth Messages
            (1, 'auth_login_authentication_incorrect', 'Login Authentication Error', NULL, 'Authentication is incorrect. Check your username and password.', 1, 0),
            (2, 'user_login_is_required', 'User Login Required Message', NULL, 'User Login is required', 1, 0),
            (3, 'password_is_required', 'Password Required Message', NULL, 'Password is required', 1, 0),

            -- Email Templates
            (4, 'notification_broadcast_content', 'General Broadcast Notification', 'New Notification', '
            <div><p>A new notification has been shared for your attention:
            <br /><br />
            <b>From</b>:%s
            <br/><br/>
            <b>Message</b>: %s</p></div>', 1, 2),

            (5, 'reset_password_message', 'Reset Password Link', 'Password Reset', 'Dear %s, <br /><br />The reset password request was successful. Please follow this <a href=\"%s\"> %s </a> to insert your new password of your profile.<br /><br />Sheria360 team,<br /><br />Note: this is an automatic email generated by %s. Please, do not reply.', 1, 4),

            (6, 'new_case_added_content_email', 'New Case/Matter Added (Internal)', 'New Case Added', '<div style=\"%s\"><p>
            A New %s has been added by %s.
            <br/>
            <br/>
            <b>Matter ID</b>: %s
            <br/>
            <b>Title</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br/>
            <b>Party Name</b>: %s 
            <br />
            <b>File/Ref #</b>: %s
            <br />
            <b>Filed in Court on</b>: %s
            <br />
            <b>Next Court Date</b>: %s
            <br />
            <b>Court Activity Purpose</b>: %s
            <br />
            <b>Description:</b> %s</p></div>', 1, 12),

            (7, 'new_ip_added_content_email', 'New IP Record Added', 'New IP Record Added', '<div style=\"%s\"><p>
            A New %s has been added by %s.
            <br/>
            <br/>
            <b>ID</b>: %s
            <br/>
            <b>Subject</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br/>
            <b>Party Name</b>: %s 
            <br />
            <b>File/Ref #</b>: %s 
            <br />
            <b>description</b>: %s</p></div>', 1, 9),

            (8, 'edit_case_content_email', 'Case/Matter Updated', 'Case Details Updated', '<div style=\"%s\"><p>
            The %s has been updated by %s.
            <br/>
            <br/>
            <b>Matter ID</b>: %s
            <br/>
            <b>Matter Subject</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br/>
            <b>Party Name</b>: %s 
            <br />
            <b>File/Ref #</b>: %s</p></div>', 1, 8),

            (9, 'edit_ip_content_email', 'IP Record Updated', 'IP Record Details Updated', '<div style=\"%s\"><p>
            The %s has been updated by %s.
            <br/>
            <br/>
            <b>ID</b>: %s
            <br/>
            <b>Subject</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br/>
            <b>Party Name</b>: %s 
            <br />
            <b>File/Ref #</b>: %s</p></div>', 1, 8),

            (10, 'update_ticket_status_content_email', 'Ticket Status Updated', 'Ticket Status Changed', '<div><p>
            The Status of %s has been updated by %s.
            <br/>
            <br/>
            <b>New Status</b>: %s
            <br/>
            <b>Old Status</b>: %s
            <br/>
            <b>Title</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br />
            <b>Party Name</b>: %s 
            <br/>
            <b>File/Ref #</b>: %s</p></div>', 1, 8),

            (11, 'cp_add_ticket_content_email', 'New CP Ticket Added', 'New Customer Portal Ticket', 'A New %s has been added by %s.
            <br/>
            <br/>
            <b>Matter ID</b>: %s
            <br/>
            <b>Title</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br/>
            <b>Party Name</b>: %s
            <br />
            <b>File/Ref #</b>: %s
            <br />
            <b>Matter description</b>: %s', 1, 8),

            (12, 'request_type_notification_tab_content_email', 'Request Type Notification (Client Portal)', 'New Request Submitted', 'A New %s has been added by %s.
            <br/>
            <br/>
            <b>Matter ID</b>: %s
            <br/>
            <b>Title</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br/>
            <b>Party Name</b>: %s
            <br />
            <b>File/Ref #</b>: %s
            <br />
            <b>Matter description</b>: %s', 1, 8),

            (13, 'cp_add_ticket_inform_assignee_content_email', 'New CP Ticket (Inform Assignee)', 'New Request Assigned', 'A New %s has been added by %s.
            <br/>
            <br/>
            <b>Matter ID</b>: %s
            <br/>
            <b>Title</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br/>
            <b>Party Name</b>: %s
            <br />
            <b>File/Ref #</b>: %s
            <br />
            <b>Matter description</b>: %s', 1, 8),

            (14, 'a_new_note_added_email_content', 'New Note Added to Case', 'New Note Added', '<div><p>A new note has been added to %s by %s.
            <br/>
            <br/>
            <b>Title</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br/>
            <b>Party Name</b>: %s 
            <br />
            <b>File/Ref #</b>: %s
            <br />
            <b>Note</b>: %s</p></div>', 1, 7),

            (15, 'add_case_event_content_email', 'New Case Event Added', 'New Case Event', '<div><p>
            A new Event %s has been added by %s on %s
            <br/>
            <br/>
            <b>Case</b>: %s
            <br/>
            <b>Subject</b>: %s</p></div>', 1, 5),

            (16, 'edit_case_event_content_email', 'Case Event Updated', 'Event Details Updated', '<div><p>
            Event update by %s
            <br/>
            <br/>
            <b>Case</b>: %s
            <br/>
            <b>Title</b>: %s
            <br/>
            <b>Date</b>: %s</p></div>', 1, 4),

            (17, 'new_task_note_added_email_content', 'New Task Comment/Note Added', 'New Comment on Task', '<div><p>A new comment has been added to Task %s by %s.
            <br/>
            <br/>
            <b>Task Description</b>: %s
            <br/>
            <b>Comment</b>: %s</p></div>', 1, 4),

            (18, 'edit_task_status_email_content', 'Task Status Updated', 'Task Status Changed', '<div><p>
            The Status of of the Task %s has been updated by %s.
            <br/>
            <br/>
            <b>Old Status</b>: %s
            <br/>
            <b>New Status</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br/>
            <b>Task Type</b>: %s
            <br/>
            <b>Due Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Task Description</b>: %s</p></div>', 1, 9),

            -- Contract Templates
            (19, 'contract_details_content_email', 'Contract Details Snippet', NULL, '<b>Contract Type:</b> %s
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority:</b> %s 
            <br />
            <b>Description:</b> %s', 1, 5),

            (20, 'add_contract_content_email', 'New Contract Added', 'New Contract Added', '<div><p>
            A New Contract %s - \"%s\" has been added by %s on %s with the following details:
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Description</b>: %s</p></div>', 1, 9),

            (21, 'amend_contract_content_email', 'Contract Amended', 'Contract Amended', '<div><p>
            The Contract %s - \"%s\" has been amended by %s on %s with the following details:
            <br/>
            <br/>
            <b>ID</b>: %s
            <br/>
            <b>Name</b>: %s
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Description</b>: %s</p></div>', 1, 11),

            (22, 'renew_contract_content_email', 'Contract Renewed', 'Contract Renewed', '<div><p>
            The Contract %s has been renewed by %s on %s with following details:
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Contract Name</b>: %s
            <br/>
            <b>Description</b>: %s</p></div>', 1, 9),

            (23, 'contract_approved_content_email', 'Contract Approved', 'Contract Approved', '<div><p>
            The Contract %s has been approved by %s on %s.
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Contract Name</b>: %s
            <br/>
            <b>Description</b>: %s</p></div>', 1, 9),

            (24, 'contract_signed_content_email', 'Contract Signed', 'Contract Signed', '<div><p>
            The Contract %s has been signed by %s on %s
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Contract Name</b>: %s
            <br/>
            <b>Description</b>: %s</p></div>', 1, 9),

            (25, 'edit_contract_content_email', 'Contract Updated', 'Contract Details Updated', '<div><p>
            The Contract %s - \"%s\" has been updated by %s on %s.
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Description</b>: %s</p></div>', 1, 9),

            (26, 'add_contract_comment_content_email', 'New Contract Comment Added', 'New Comment on Contract', '<div><p>
            A new Comment has been added on %s - \"%s\" by %s.
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Comment</b>: %s</p></div>', 1, 9),

            (27, 'add_contract_inform_assignee_content_email', 'New Contract Assigned', 'New Contract Assigned to You', '<div><p>
            A New Contract %s - \"%s\" has been added by %s on %s and assigned to you with the following details:
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Description</b>: %s</p></div>', 1, 9),

            (28, 'contract_awaiting_signature_content_template', 'Contract Awaiting Signature', 'Contract Ready for Signature', '<div><p>
            The Contract %s is awaiting your signature with the following details:
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Contract Name</b>: %s
            <br/>
            <b>Description</b>: %s</p></div>', 1, 8),

            (29, 'contract_rejected_content_email', 'Contract Approval Rejected', 'Contract Approval Rejected', '<div><p>
            The Approval request for the Contract %s has been rejected by %s on %s.
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Name</b>: %s</p></div>', 1, 5),

            (30, 'negotiation_requested_content_email', 'Negotiation Requested on Contract', 'Contract Negotiation Requested', '<div><p>
            A new Negotiation request has been added by %s for Contract %s on %s.
            <br/>
            <br/>
            Comment: %s
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Contract Name</b>: %s</p></div>', 1, 9),

            (31, 'negotiation_comment_added_content_email', 'New Negotiation Comment Added', 'New Comment on Negotiation', '<div><p>
            A new Comment on the Negotiation stream for Contract %s has been added by %s on %s.
            <br/>
            <br/>
            <b>Comment</b>: %s
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Contract Name</b>: %s</p></div>', 1, 9),

            (32, 'negotiation_completed_content_email', 'Negotiation Completed', 'Contract Negotiation Completed', '<div><p>
            The Negotiation on the Contract %s has been set to Completed by %s.
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Contract Name</b>: %s</p></div>', 1, 7),

            (33, 'negotiation_forwarded_content_email', 'Negotiation Forwarded', 'Negotiation Forwarded to You', '<div><p>
            Negotiation on Contract %s: %s has been forwarded to you on %s</p></div>', 1, 3),

            (34, 'hearing_injected_meeting_description', 'Hearing Meeting Description', NULL, '<p>
            <b>External/Court Reference: %s</b><br/><br/>
            --------------------------------------------------<br/><br/>
            <b>Hearing Type</b>: %s<br/><br/>
            --------------------------------------------------<br/><br/>
            <b>Litigation Stage</b>: %s<br/><br/>
            <b>Court Type</b>: %s<br/><br/>
            <b>Court Degree / Circuit</b>: %s<br/><br/>
            <b>Court Region</b>: %s<br/><br/>
            <b>Court Name</b>: %s<br/><br/>
            --------------------------------------------------<br/><br/>
            <b>Judges</b>: %s<br/><br/>
            --------------------------------------------------<br/><br/>
            <b>Comments</b>: %s
            </p>', 1, 9),

            (35, 'azure_ad_auth_login_authentication_incorrect', 'Azure AD Login Error', NULL, 'Authentication is incorrect. This screen is not for Azure Ad, go to \"Login using Azure Ad\".', 1, 0),

            (36, 'task_notification_template_body', 'New Task Assigned', 'New Task Assigned to You', '<div xmlns=\"http://www.w3.org/1999/html\"><div>A new task has been assigned to you.
            <br/>
            <br/>
            <b>Task ID</b>: %s
            <br/>
            <b>Task Type</b>: %s
            <br/>
            <b>Task Status</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Related Matter</b>: %s
            <br/>
            <b>Due Date</b>: %s
            <br/>
            <b>Description</b>: %s</div></div>', 1, 7),

            (37, 'edit_contract_status_notification_body', 'Contract Status Updated', 'Contract Status Changed', '<div><p>
            The Status of the Contract %s - \"%s\" has been modified.
            <br/>
            <br/>
            <b>Old Status</b>: %s
            <br/>
            <b>New Status</b>: %s
            <br/>
            <b>Modified by</b>: %s
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s</p></div>', 1, 9),

            (38, 'cp_add_contract_content_email_body', 'New CP Contract Added', 'New Customer Portal Contract', '<div><p>
            A New Contract %s - \"%s\" has been added by %s on %s with the following details:
            <br/>
            <br/>
            <b>Contract Type</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>End Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Description</b>: %s</p></div>', 1, 9),

            (39, 'notify_breached_contract_slas_content_email', 'Contract SLA Breached', 'ALERT: Contract SLA Breached', '<div><p>
            Alert: The SLA on %s is breached.
            <br/>
            <br/>
            <b>Time spent</b>: %s.
            <br />
            <b>Contract Name</b>: %s
            <br/>
            <b>Contract Date</b>: %s
            <br/>
            <b>Priority</b>: %s</p></div>', 1, 5),

            (40, 'invite_new_user_body', 'New User Invitation', 'Welcome to Sheria360', '
            This email is an invitation to access Sheria360.<br />
            You are invited to change your password at your first login.<br />
            Please <a href=\"%s\">click here</a> to activate your account.', 1, 1),

            (41, 'opinion_notification_template_body', 'New Opinion Assigned', 'New Opinion Assigned to You', '<div xmlns=\"http://www.w3.org/1999/html\"><div>A new opinion has been assigned to you.
            <br/>
            <br/>
            <b>Opinion ID</b>: %s
            <br/>
            <b>Opinion Type</b>: %s
            <br/>
            <b>Opinion Status</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Related Matter</b>: %s
            <br/>
            <b>Due Date</b>: %s
            <br/>
            <b>Description</b>: %s</div></div>', 1, 7),

            (42, 'new_opinion_note_added_email_content', 'New Opinion Comment/Note Added', 'New Comment on Opinion', '<div><p>A new comment has been added to Opinion %s by %s.
            <br/>
            <br/>
            <b>Opinion Description</b>: %s
            <br/>
            <b>Comment</b>: %s</p></div>', 1, 4),

            (43, 'edit_opinion_status_email_content', 'Opinion Status Updated', 'Opinion Status Changed', '<div><p>
            The Status of of the Opinion %s has been updated by %s.
            <br/>
            <br/>
            <b>Old Status</b>: %s
            <br/>
            <b>New Status</b>: %s
            <br/>
            <b>Assignee</b>: %s
            <br/>
            <b>Opinion Type</b>: %s
            <br/>
            <b>Due Date</b>: %s
            <br/>
            <b>Priority</b>: %s
            <br/>
            <b>Opinion Description</b>: %s</p></div>', 1, 9);

            SET IDENTITY_INSERT [dbo].[{$this->table_name}] OFF;
        ";

        $this->db->query($sql);
        $this->db->trans_complete(); // Complete the transaction
    }

    public function down()
    {
        $this->db->trans_start(); // Start a transaction for atomicity

        // Delete all inserted templates based on the IDs used in the UP method
        $ids_to_delete = range(1, 43);
        $this->db->where_in('id', $ids_to_delete);
        $this->db->delete($this->table_name);

        $this->db->trans_complete(); // Complete the transaction
    }
}
