<?php

$currentTab = $this->uri->rsegment(1);
$secondSegment = !strcmp($this->uri->rsegment(2), "document_pre_download") ? $this->uri->rsegment(4) . "_file_pre_download" : $this->uri->rsegment(2);
echo "<div class=\"nav-money-bg\"></div>\r\n<nav class=\"navbar navbar-expand-lg navbar-light\" id=\"subNavMenu\">\r\n\r\n  <a class=\"navbar-brand\" href=\"#\"></a>\r\n  <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbar-money-menu\" aria-controls=\"navbar-money-menu\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n    <span class=\"navbar-toggler-icon\"></span>\r\n  </button>\r\n  <div class=\"collapse navbar-collapse\" id=\"navbar-money-menu\">\r\n    <ul class=\"navbar-nav mr-auto\">\r\n      <li class=\"nav-item\"  id=\"money_dashboards-tab\">\r\n        <a class=\"nav-link\" href=\"";
echo site_url("money_dashboards");
echo "\">";
echo $this->lang->line("dashboard_in_menu");
echo "</a>\r\n      </li>\r\n      <li class=\"nav-item dropdown\" id=\"clients-tab\">\r\n        <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown-clients\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n            ";
echo $this->lang->line("clients_money");
echo "        </a>\r\n        <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown-clients\">\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("clients");
echo "\">";
echo $this->lang->line("view_all");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("clients/add");
echo "\">";
echo $this->lang->line("add_new_client");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("clients/deposits");
echo "\">";
echo $this->lang->line("client_trust_funds");
echo "</a>\r\n        </div>\r\n      </li>\r\n ";
  /* <li class=\"nav-item dropdown\" id=\"invoices-tab\">\r\n        <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown-invoices\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n            ";
echo $this->lang->line("invoices");
echo "        </a>\r\n        <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown-invoices\">\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/invoices_list");
echo "\">";
echo $this->lang->line("view_all_invoices");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/invoice_add");
echo "\">";
echo $this->lang->line("add_new_invoice");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/quotes_list");
echo "\">";
echo $this->lang->line("view_all_quotes");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/quote_add");
echo "\">";
echo $this->lang->line("add_new_quote");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/credit_notes");
echo "\">";
echo $this->lang->line("view_all_credit_notes");</a>\r\n        </div>\r\n      </li>\r\n */
echo "<li class=\"nav-item dropdown\" id=\"expenses-tab\">\r\n        <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown-expenses\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n            ";
echo $this->lang->line("expenses");
echo "        </a>\r\n        <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown-expenses\">\r\n          ";
$expense_action = $this->is_auth->check_uri_permissions("/vouchers/", "/vouchers/expenses_list/", "money", true, true) ? site_url("vouchers/expenses_list") : site_url("vouchers/my_expenses_list");
echo "          <a class=\"dropdown-item\" href=\"";
echo $expense_action;
echo "\">";
echo $this->lang->line("list_module") . " " . $this->lang->line("expenses");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/expense_add");
echo "\">";
echo $this->lang->line("record_expense");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/expenses_add_bulk");
echo "\">";
echo $this->lang->line("new") . " " . $this->lang->line("bulk_expenses");
echo "</a>\r\n        </div>\r\n      </li>\r\n ";
/*<li class=\"nav-item\"  id=\"time_tracking-tab\">\r\n        <a class=\"nav-link\" href=\"";
echo site_url("time_tracking");
echo "\">";
echo $this->lang->line("time_tracking");
echo "</a>\r\n      </li>\r\n */
echo "<li class=\"nav-item dropdown\" id=\"vendors-tab\">\r\n        <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown-vendors\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n            ";
echo $this->lang->line("vendors");
echo "        </a>\r\n        <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown-vendors\">\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vendors");
echo "\">";
echo $this->lang->line("view_all_vendors");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vendors/add");
echo "\">";
echo $this->lang->line("add_new_vendor");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/bills_list");
echo "\">";
echo $this->lang->line("view_all_bills");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/bill_add");
echo "\">";
echo $this->lang->line("add_bill");
echo "</a>\r\n        </div>\r\n      </li>\r\n\r\n  ";
/*<li class=\"nav-item dropdown\" id=\"partners-tab\">\r\n        <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown-partners\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n            ";
echo $this->lang->line("partners");
echo "        </a>\r\n        <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown-partners\">\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("partners");
echo "\">";
echo $this->lang->line("view_all");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("partners/add");
echo "\">";
echo $this->lang->line("add_new_partner");
echo "</a>\r\n        </div>\r\n      </li>\r\n   */
echo "<li class=\"nav-item\"  id=\"reports-tab\">\r\n        <a class=\"nav-link\" href=\"";
echo site_url("reports");
echo "\">";
echo $this->lang->line("reports");
echo "</a>\r\n      </li>\r\n      <li class=\"nav-item dropdown\" id=\"setup-tab\">\r\n        <a class=\"nav-link dropdown-toggle\" href=\"#\" id=\"navbarDropdown-setup\" role=\"button\" data-toggle=\"dropdown\" aria-haspopup=\"true\" aria-expanded=\"false\">\r\n            ";
echo $this->lang->line("advanced");
echo "        </a>\r\n        <div class=\"dropdown-menu\" aria-labelledby=\"navbarDropdown-setup\">\r\n          <h6 class=\"dropdown-header\" href=\"javascript:;\">";
echo $this->lang->line("manual_journals");
echo "</h6>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/journals_list");
echo "\">";
echo $this->lang->line("view_journals");
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("vouchers/journal_add");
echo "\">";
echo $this->lang->line("add_journal");
echo "</a>\r\n          <div class=\"dropdown-divider\"></div>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("accounts/money_transfer");
echo "\">";
echo $this->lang->line("money_transfer");
echo "</a>\r\n          <div class=\"dropdown-divider\"></div>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("accounts");
echo "\">";
echo $this->lang->line("chart_of_accounts");
echo "</a>\r\n          <div class=\"dropdown-divider\"></div>\r\n          <a class=\"dropdown-item\" href=\"";
echo site_url("setup");
echo "\">";
echo $this->lang->line("settings");
echo "</a>\r\n          <div class=\"dropdown-divider\"></div>\r\n          <h6 class=\"dropdown-header\" href=\"javascript:;\">";
echo $this->lang->line("set_content_language");
echo "</h6>\r\n          ";
$currUrl = urlencode(base64_encode(current_url()));
$lang = $this->session->userdata("AUTH_language");
echo "          <a class=\"dropdown-item\" href=\"javascript:;\" onclick=\"changeMoneyLangContent('";
echo $systemLanguage;
echo "');\">";
echo $money_language == "" ? "<i class=\"fa-solid fa-check " . ($lang == "arabic" ? "ar-selected-lang" : "foreign-selected-lang") . "\"\"></i>" : "";
echo $systemLanguage;
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"javascript:;\" onclick=\"changeMoneyLangContent('fl1');\">";
echo $money_language == "fl1" ? "<i class=\"fa-solid fa-check " . ($lang == "arabic" ? "ar-selected-lang" : "foreign-selected-lang") . "\"\"></i>" : "";
echo $systemForeignLanguage_1;
echo "</a>\r\n          <a class=\"dropdown-item\" href=\"javascript:;\" onclick=\"changeMoneyLangContent('fl2');\">";
echo $money_language == "fl2" ? "<i class=\"fa-solid fa-check " . ($lang == "arabic" ? "ar-selected-lang" : "foreign-selected-lang") . "\"\"></i>" : "";
echo $systemForeignLanguage_2;
echo "</a>\r\n        </div>\r\n      </li>\r\n    </ul>\r\n    <form class=\"form-inline my-2 my-lg-0\">\r\n        ";
$organizations = $this->session->userdata("organizations");
$organizationID = $this->session->userdata("organizationID");
if (!empty($organizations)) {
    echo "<div id=\"entity-dropdown\">\r\n                    <select id=\"organizations\" onchange=\"setOrg(this.value)\" class=\"form-control  mr-sm-2 tooltip-title\">";
    foreach ($organizations as $k => $v) {
        $selected = "";
        if ($organizationID == $k) {
            $selected = "selected=\"selected\"";
        }
        echo "<option title= \"";
        echo $v;
        echo "\" value=\"";
        echo $k;
        echo "\" ";
        echo $selected;
        echo ">";
        echo $v;
        echo "</option>";
    }
    echo "</select></div>";
}
echo "    </form>\r\n  </div>\r\n</nav>\r\n\r\n<script>\r\n    jQuery(document).ready(function (e) {\r\n        var currentTab = '";
echo $currentTab;
echo "';\r\n        var subNavMenu = jQuery('#subNavMenu');\r\n        var setupArr = ['organizations', 'expense_categories', 'taxes', 'discounts', 'items', 'terms', 'organization_invoice_templates', 'users_rate', 'money_preferences', 'invoice_notes', 'accounts_types', 'accounts', 'accounts', 'invoice_detail_format'];\r\n        if (jQuery.inArray(currentTab, setupArr) !== -1) {\r\n            jQuery('#setup-tab', subNavMenu).addClass('active');\r\n        } else {\r\n            if (currentTab === 'vouchers') {\r\n                var secondSegment = '";
echo $secondSegment;
echo "';\r\n                var invoicesArr = ['invoices_list', 'invoice_add', 'invoice_edit', 'invoice_payment_add', 'invoice_payment_edit', 'invoice_payments_made', 'invoice_payment_print', 'invoice_details', 'invoice_related_documents', 'invoice_details_pre_export', 'invoice_file_pre_download'];\r\n                var expensesArr = ['expenses_list', 'expense_add', 'expense_edit', 'case_expenses_add', 'expense_related_documents', 'expense_file_pre_download', 'expenses_add_bulk'];\r\n                var journalsArr = ['journals_list', 'journal_add', 'journal_edit', 'journal_print'];\r\n                var billsArr = ['bills_list', 'bill_add', 'bill_edit', 'bill_payment_add', 'bill_payment_edit', 'bill_payments_made', 'bill_payment_print', 'bill_related_documents', 'bill_file_pre_download', 'bills_bulk_payment'];\r\n                if (jQuery.inArray(secondSegment, billsArr) !== -1)\r\n                    jQuery('#bills-tab', subNavMenu).addClass('active');\r\n                if (jQuery.inArray(secondSegment, journalsArr) !== -1)\r\n                    jQuery('#setup-tab', subNavMenu).addClass('active');\r\n                if (jQuery.inArray(secondSegment, expensesArr) !== -1)\r\n                    jQuery('#expenses-tab', subNavMenu).addClass('active');\r\n                if (jQuery.inArray(secondSegment, invoicesArr) !== -1)\r\n                    jQuery('#invoices-tab', subNavMenu).addClass('active');\r\n            } else\r\n                jQuery('#' + currentTab + '-tab', subNavMenu).addClass('active');\r\n        }\r\n    });\r\n    function setOrg(value) {\r\n        jQuery.ajax({\r\n            url: getBaseURL('money') + 'dashboard/switch_organization/',\r\n            type: 'POST',\r\n            dataType: 'JSON',\r\n            data: {'organization_id': value},\r\n            beforeSend: function () {\r\n                jQuery(\"#loader-global\").show();\r\n            },\r\n            success: function (response) {\r\n                jQuery(\"#loader-global\").hide();\r\n                switch (response.result) {\r\n                    case 'login_needed':\r\n                        window.location = getBaseURL('money') + 'dashboard';\r\n                        break;\r\n                    case false:\r\n                        pinesMessage({ty: 'warning', m: _lang.invalid_request});\r\n                        break;\r\n                    case true:\r\n                        location.reload(false);\r\n                        break;\r\n                }\r\n            },error: defaultAjaxJSONErrorsHandler\r\n        });\r\n    }\r\n    function changeMoneyLangContent(lang) {\r\n        var currUrl = '";
echo $currUrl;
echo "';\r\n        var urlAction = '";
echo site_url("dashboard/set_money_language");
echo "';\r\n        jQuery('<form action=\"' + urlAction + '\" name=\"tempFromToBeDeleted\" id=\"tempFromToBeDeleted\" method=\"post\" class=\"d-none\"><input type=\"hidden\" name=\"lang\" value=\"' + lang + '\"><input type=\"hidden\" name=\"lastUrl\" value=\"' + currUrl + '\"></form>').appendTo('body').submit().remove();\r\n    }\r\n    // selectPickerLoad('#organizations', '#entity-dropdown');\r\n</script>\r\n";

?>