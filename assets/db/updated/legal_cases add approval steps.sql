--select * from correspondence_document_types
select * from correspondences

SELECT "c".*, "ct"."name" as "correspondence_type_name", "cs"."name" as "status_name", 
(CASE WHEN c.sender_contact_type= 'company' THEN sender_comp.name ELSE CONCAT(sender_contact.firstName, ' ', sender_contact.lastName) END) 
as sender, (CASE WHEN c.sender_contact_type= 'company' THEN recipient_contact.name ELSE CONCAT(recipient_contact.firstName, ' ', recipient_contact.lastName) END )as recipient, CONCAT(sender.firstName, ' ', sender.lastName) as sender, CONCAT(assignee.firstName, ' ', assignee.lastName) as assignee, CONCAT(creator.firstName, ' ', creator.lastName) as createdBy, CONCAT(modifier.firstName, ' ', modifier.lastName) as modifiedBy, CONCAT('COR-', c.id) as cid FROM "correspondences" as "c" LEFT JOIN "correspondence_types" "ct" ON "ct"."id" = "c"."correspondence_type_id" LEFT JOIN "correspondence_statuses" "cs" ON "cs"."id" = "c"."status_id" LEFT JOIN "contacts" "sender_contact" ON "sender_contact"."id" = "c"."sender" LEFT JOIN "companies" "sender_comp" ON "sender_comp"."id" = "c"."sender" and "c"."sender_contact_type"= 'company' LEFT JOIN "contacts" "recipient_contact" ON "recipient_contact"."id" = "c"."recipient" LEFT JOIN "companies" "recipient_comp" ON "recipient_comp"."id" = "c"."recipient" and "c"."sender_contact_type"= 'company' LEFT JOIN "user_profiles" "assignee" ON "assignee"."user_id" = "c"."assigned_to" LEFT JOIN "user_profiles" "creator" ON "creator"."user_id" = "c"."createdBy" LEFT JOIN "user_profiles" "modifier" ON "modifier"."user_id" = "c"."modifiedBy"
WHERE "c"."category" = 'Incoming' ORDER BY "c"."createdOn" DESC